(function(){var t,e,r,o,n,a;o=function(){function t(t){this.notional=m.prop(t.notional),this.rate=m.prop(t.rate),this.months=m.prop(t.months),this.speed_type=m.prop(t.speed_type),this.speed_amt=m.prop(t.speed_amt),this.price=m.prop(t.price)}return t}(),n=function(){function t(t){var e;this.amortization_schedule=m.prop(function(){var m,r,o,n;for(o=JSON.parse(t.amortization_schedule),n=[],m=0,r=o.length;m<r;m++)e=o[m],n.push(e);return n}()),this.yield=m.prop(t.yield),this.wal=m.prop(t.wal),this.mod_dur=m.prop(t.mod_dur),this.macaulay_dur=m.prop(t.macaulay_dur)}return t}(),a={mortgage:m.prop(new o({notional:1e6,rate:5,months:360,speed_type:"CPR",speed_amt:0,price:100})),result:m.prop()},e={controller:function(){return{submit:function(t){return t.preventDefault(),m.request({method:"POST",url:"api/calculate",type:n,data:a.mortgage()}).then(function(t){return a.result(t)})}}},view:function(t){return m("div",[m(".row",[m(".col-md-6",[m("form",[m(".form-group",[m("label",{for:"notional"},"Notional"),m("input",{type:"number",class:"form-control",id:"notional",value:a.mortgage().notional(),onchange:m.withAttr("value",a.mortgage().notional)})]),m(".form-group",[m("label",{for:"rate"},"Rate"),m("input",{type:"number",class:"form-control",id:"rate",value:a.mortgage().rate(),onchange:m.withAttr("value",a.mortgage().rate)})]),m(".form-group",[m("label",{for:"months"},"Months"),m("input",{type:"number",class:"form-control",id:"months",value:a.mortgage().months(),onchange:m.withAttr("value",a.mortgage().months)})]),m(".form-group",[m("label",{for:"speed_type"},"Speed Type"),m("select",{class:"form-control",id:"speed_type",value:a.mortgage().speed_type(),onchange:m.withAttr("value",a.mortgage().speed_type)},[m("option","CPR"),m("option","PSA"),m("option","SMM")])]),m(".form-group",[m("label",{for:"speed_amt"},"Speed Amount"),m("input",{type:"number",class:"form-control",id:"speed_amt",value:a.mortgage().speed_amt(),onchange:m.withAttr("value",a.mortgage().speed_amt)})]),m(".form-group",[m("label",{for:"price"},"Price"),m("input",{type:"number",class:"form-control",id:"price",value:a.mortgage().price(),onchange:m.withAttr("value",a.mortgage().price)})]),m("button",{type:"submit",class:"btn btn-default",onclick:t.submit},"Get Bond Analytics")])]),m(".col-md-6",[m("h4","Results:"),m("table",{class:"table table-striped table-bordered"},[m("tbody",[m("tr",[m("td","Yield"),m("td",null!=a.result()?a.result().yield():"")]),m("tr",[m("td","WAL"),m("td",null!=a.result()?a.result().wal():"")]),m("tr",[m("td","Mod Dur"),m("td",null!=a.result()?a.result().mod_dur():"")]),m("tr",[m("td","Macaulay Dur"),m("td",null!=a.result()?a.result().macaulay_dur():"")])])])])])])}},t={view:function(t){var e,r;return m("div",[null!=a.result()?m("div",[m("h3","Amortization Schedule"),m("table",{class:"table table-striped"},[m("thead",[m("tr",[m("td","Period"),m("td","Sched Pmt"),m("td","Interest"),m("td","Reg Prin"),m("td","Prepayment"),m("td","Total Prin"),m("td","Balance"),m("td","Total Pmt")])]),m("tbody",[function(){var t,o,n,l;for(n=a.result().amortization_schedule(),l=[],e=t=0,o=n.length;t<o;e=++t)r=n[e],l.push(m("tr",[m("td",e),m("td",r.sched_pmt),m("td",r.interest),m("td",r.reg_prin),m("td",r.prepayment),m("td",r.total_prin),m("td",r.balance),m("td",r.total_pmt)]));return l}()])])]):void 0])}},r={view:function(r){return m("div",[m.component(e),m.component(t)])}},m.mount(document.getElementById("calculator"),r)}).call(this);